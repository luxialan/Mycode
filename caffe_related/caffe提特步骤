http://caffe.berkeleyvision.org/gathered/examples/feature_extraction.html caffe特征提取步骤

在caffe的根目录下：/home/lixiang/caffe/caffe-master/

1. 创建一个文件夹存储各种结果文件
mkdir examples/ctrip_temp

2. 将需要提取特征的图片放到examples/images文件夹下
find `pwd`/examples/images -type f -exec echo {} \; > examples/ctrip_temp/temp.txt
sed "s/$/ 0/" examples/ctrip_temp/temp.txt > examples/ctrip_temp/file_list.txt
通过以上两步得到存储图片绝对路径的txt文档

3. 如果是第一次使用还需要进行以下一步
./data/ilsvrc12/get_ilsvrc_aux.sh

4. 将配置文件拷贝一份到examples/_temp文件夹下
cp examples/feature_extraction/imagenet_val.prototxt examples/ctrip_temp
这里如果只是提取特征的话，imagenet_val.prototxt中有一个batchsize要重新修改一下建议修改为要提特征的图片的总数

5. 使用下面的语句提取图片特征格式为leveldb
build/tools/extract_features.bin models/bvlc_reference_caffenet/bvlc_reference_caffenet.caffemodel examples/ctrip_temp/imagenet_val.prototxt fc7 examples/ctrip_temp/features 120 leveldb

6. 使用extract.py程序将leveldb的特征转为txt格式，其中有一个imagecount需要每次修改 
  一下，修改为图片的总数
  export PYTHONPATH=$PYTHONPATH:/home/shangxuan/caffe/python (添加路径)
  python extract.py features feature.txt 6000

7. 用vim打开feature.txt 使用以下语句消除[ 和 ]
  %s#\]##g  消除caffe提出来的特征的]
  %s#\[##g  消除caffe提出来的特征的[


